<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>浮島親子 - 專案結案報告</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans TC', sans-serif;
            background: #faf9f7;
            color: #3d3833;
            line-height: 1.7;
        }
        .page { max-width: 840px; margin: 0 auto; padding: 32px 24px 64px; }

        /* Header */
        .header {
            text-align: center;
            padding: 48px 0 40px;
            border-bottom: 2px solid #e8dfd3;
            margin-bottom: 48px;
        }
        .header h1 {
            font-size: 32px;
            font-weight: 700;
            color: #2d6a4f;
            margin-bottom: 8px;
        }
        .header .subtitle {
            font-size: 18px;
            color: #6b7280;
        }
        .header .badge {
            display: inline-block;
            margin-top: 16px;
            padding: 6px 20px;
            background: #d4edda;
            color: #2d6a4f;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        /* Sections */
        .section {
            margin-bottom: 48px;
        }
        .section-title {
            font-size: 22px;
            font-weight: 700;
            color: #2d6a4f;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #c8e6c9;
        }
        .section-title span {
            font-size: 16px;
            color: #888;
            font-weight: 400;
            margin-left: 8px;
        }

        /* Summary card */
        .summary-card {
            background: #fff;
            border-radius: 12px;
            padding: 28px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .summary-row {
            display: flex;
            padding: 10px 0;
            border-bottom: 1px solid #f0ebe4;
        }
        .summary-row:last-child { border-bottom: none; }
        .summary-label {
            width: 140px;
            font-weight: 600;
            color: #6b7280;
            flex-shrink: 0;
        }
        .summary-value { color: #3d3833; }

        /* Story section */
        .story {
            background: #fff;
            border-radius: 12px;
            padding: 28px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .story-step {
            position: relative;
            padding-left: 36px;
            margin-bottom: 24px;
        }
        .story-step:last-child { margin-bottom: 0; }
        .story-step::before {
            content: '';
            position: absolute;
            left: 12px;
            top: 28px;
            bottom: -24px;
            width: 2px;
            background: #c8e6c9;
        }
        .story-step:last-child::before { display: none; }
        .story-dot {
            position: absolute;
            left: 4px;
            top: 6px;
            width: 18px;
            height: 18px;
            background: #2d6a4f;
            border-radius: 50%;
            border: 3px solid #d4edda;
        }
        .story-step h4 {
            font-size: 16px;
            font-weight: 700;
            color: #2d6a4f;
            margin-bottom: 4px;
        }
        .story-step p {
            font-size: 15px;
            color: #555;
        }

        /* Deliverables */
        .deliverable-group {
            background: #fff;
            border-radius: 12px;
            padding: 24px 28px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .deliverable-group h3 {
            font-size: 17px;
            font-weight: 700;
            color: #5a4a3a;
            margin-bottom: 14px;
            padding-bottom: 8px;
            border-bottom: 1px solid #f0ebe4;
        }
        .check-item {
            display: flex;
            align-items: flex-start;
            padding: 5px 0;
            font-size: 15px;
        }
        .check-icon {
            color: #2d6a4f;
            font-weight: bold;
            margin-right: 10px;
            flex-shrink: 0;
        }

        /* Environment table */
        .env-table {
            width: 100%;
            border-collapse: collapse;
            background: #fff;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .env-table th {
            background: #2d6a4f;
            color: #fff;
            padding: 12px 16px;
            text-align: left;
            font-size: 14px;
            font-weight: 600;
        }
        .env-table td {
            padding: 12px 16px;
            border-bottom: 1px solid #f0ebe4;
            font-size: 14px;
        }
        .env-table tr:last-child td { border-bottom: none; }
        .env-table a { color: #2d6a4f; text-decoration: none; }
        .env-table a:hover { text-decoration: underline; }

        /* Architecture diagram */
        .arch-box {
            background: #fff;
            border-radius: 12px;
            padding: 32px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            text-align: center;
        }
        .arch-flow {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 12px;
        }
        .arch-node {
            background: #e8f5e9;
            border: 2px solid #a5d6a7;
            border-radius: 10px;
            padding: 14px 20px;
            font-weight: 600;
            font-size: 14px;
            color: #2d6a4f;
        }
        .arch-node.ai {
            background: #fff3e0;
            border-color: #ffcc80;
            color: #e65100;
        }
        .arch-arrow {
            font-size: 22px;
            color: #aaa;
        }

        /* Stats grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 16px;
        }
        .stat-card {
            background: #fff;
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .stat-number {
            font-size: 32px;
            font-weight: 800;
            color: #2d6a4f;
        }
        .stat-label {
            font-size: 13px;
            color: #888;
            margin-top: 4px;
        }

        /* Warnings / notes */
        .note-list {
            background: #fff;
            border-radius: 12px;
            padding: 24px 28px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        }
        .note-item {
            padding: 8px 0;
            font-size: 15px;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        .note-icon { flex-shrink: 0; font-size: 16px; }

        /* Apple review info */
        .review-card {
            background: #f9f5ed;
            border: 1px solid #e0d6c2;
            border-radius: 12px;
            padding: 20px 28px;
            margin-top: 16px;
        }
        .review-card h4 {
            font-size: 15px;
            font-weight: 700;
            color: #5a4a3a;
            margin-bottom: 8px;
        }
        .review-card code {
            background: #fff;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 14px;
            color: #d63384;
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 56px;
            padding-top: 24px;
            border-top: 2px solid #e8dfd3;
            color: #aaa;
            font-size: 13px;
        }

        /* Print */
        @media print {
            body { background: #fff; }
            .page { padding: 0; }
            .section { break-inside: avoid; }
        }

        /* Mobile */
        @media (max-width: 640px) {
            .page { padding: 16px 12px 40px; }
            .header h1 { font-size: 24px; }
            .summary-row { flex-direction: column; }
            .summary-label { width: auto; margin-bottom: 2px; }
            .arch-flow { flex-direction: column; }
            .arch-arrow { transform: rotate(90deg); }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
        }
    </style>
</head>
<body>
<div class="page">

    <!-- Header -->
    <div class="header">
        <h1>浮島親子 Island Parents</h1>
        <div class="subtitle">AI 輔助親子諮詢督導系統 — 專案結案報告</div>
        <div class="badge">專案已交付</div>
    </div>

    <!-- 1. 專案摘要 -->
    <div class="section">
        <div class="section-title">1. 專案摘要</div>
        <div class="summary-card">
            <div class="summary-row">
                <div class="summary-label">專案名稱</div>
                <div class="summary-value">浮島親子 (Island Parents) — AI 輔助親子諮詢督導系統</div>
            </div>
            <div class="summary-row">
                <div class="summary-label">專案說明</div>
                <div class="summary-value">為親子諮詢師提供即時情緒分析、安全評估、8 大教養流派理論指導與諮詢報告生成的 AI 督導系統</div>
            </div>
            <div class="summary-row">
                <div class="summary-label">開發期間</div>
                <div class="summary-value">2025/09 ~ 2026/02（約 5 個月）</div>
            </div>
            <div class="summary-row">
                <div class="summary-label">技術架構</div>
                <div class="summary-value">FastAPI 後端 + Supabase 資料庫 + Google Gemini AI + Cloud Run 雲端部署</div>
            </div>
        </div>
    </div>

    <!-- 2. 專案演進故事 -->
    <div class="section">
        <div class="section-title">2. 專案演進故事</div>
        <div class="story">
            <div class="story-step">
                <div class="story-dot"></div>
                <h4>起初 — 通用諮詢平台</h4>
                <p>最初設計為通用「諮詢平台」，包含 RAG 知識庫、文件上傳、報告生成等功能，目標是服務多種諮詢場景。</p>
            </div>
            <div class="story-step">
                <div class="story-dot"></div>
                <h4>轉變 — 聚焦親子諮詢督導</h4>
                <p>隨著需求逐漸明確，決定聚焦於親子諮詢督導場景，加入即時情緒分析、安全等級判斷、8 大教養流派理論整合等專屬功能。</p>
            </div>
            <div class="story-step">
                <div class="story-dot"></div>
                <h4>收斂 — 浮島親子誕生</h4>
                <p>最終產品定名為「浮島親子 Island Parents」，專為親子諮詢師設計的 AI 督導助手，從大而全的平台收斂為精準的垂直應用。</p>
            </div>
        </div>
    </div>

    <!-- 3. 交付成果清單 -->
    <div class="section">
        <div class="section-title">3. 交付成果清單</div>

        <div class="deliverable-group">
            <h3>帳號與安全</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> 註冊 API（含密碼規則驗證）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 登入 API（JWT Token + 90 天有效期）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 密碼重設（6 碼驗證碼 + Email 寄送）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> Email 驗證系統（JWT-based）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 速率限制（防止暴力破解）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> Apple Review 審核帳號</div>
        </div>

        <div class="deliverable-group">
            <h3>諮詢核心功能</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> Client（個案）管理 CRUD</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> Case（案件）管理 CRUD</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> Session（諮詢紀錄）管理</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 即時語音轉文字（ElevenLabs Scribe Realtime STT）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 即時情緒分析（每 3 秒更新，Gemini Flash Lite）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 安全等級判斷（綠 / 黃 / 紅 三級 + 緊急 / 練習雙模式）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 8 大親職教養理論整合（阿德勒、薩提爾、ABA、全腦教養等）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 逐字稿級別話術指導（100-300 字實戰範例）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 諮詢報告自動生成（Gemini 3 Flash）</div>
        </div>

        <div class="deliverable-group">
            <h3>計費與使用量</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> 雙計費模式（訂閱制 / 預付制）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 月度使用量追蹤（360 分鐘/月）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 使用量統計 API</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> RevenueCat 訂閱整合（iOS 端）</div>
        </div>

        <div class="deliverable-group">
            <h3>管理後台</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> Admin Portal（諮詢師管理、點數管理）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 密碼重設管理</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 動態欄位 Schema（多租戶適配）</div>
        </div>

        <div class="deliverable-group">
            <h3>基礎設施</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> CI/CD 自動化（GitHub Actions &rarr; Cloud Run）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> Staging / Production 雙環境</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> Firebase Hosting 反向代理（品牌 URL）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 服務條款 &amp; 隱私政策頁面</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> iOS 開發文檔 (IOS_GUIDE_PARENTS.md, 3500+ 行)</div>
        </div>

        <div class="deliverable-group">
            <h3>品質保證</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> 432+ 自動化測試</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> Pre-commit hooks (Ruff linting)</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 整合測試涵蓋所有 API</div>
        </div>
    </div>

    <!-- 4. 系統環境 -->
    <div class="section">
        <div class="section-title">4. 系統環境</div>
        <table class="env-table">
            <thead>
                <tr>
                    <th>環境</th>
                    <th>URL</th>
                    <th>用途</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><strong>Production</strong></td>
                    <td><a href="https://island-parents-app.web.app" target="_blank">island-parents-app.web.app</a></td>
                    <td>正式環境</td>
                </tr>
                <tr>
                    <td><strong>Staging</strong></td>
                    <td><a href="https://island-parents-staging.web.app" target="_blank">island-parents-staging.web.app</a></td>
                    <td>測試環境</td>
                </tr>
                <tr>
                    <td><strong>API Console</strong></td>
                    <td><a href="https://island-parents-staging.web.app/web/console" target="_blank">island-parents-staging.web.app/web/console</a></td>
                    <td>互動測試工具</td>
                </tr>
            </tbody>
        </table>

        <div class="review-card">
            <h4>Apple Review 審核帳號</h4>
            <p>Email: <code>apple_review@islandparents.app</code></p>
            <p>Password: <code>請向專案管理員索取</code></p>
            <p>Tenant: <code>island_parents</code></p>
            <p style="margin-top: 8px; font-size: 13px; color: #888;">
                註：審核密碼已加密保存於專案管理文檔中，如需使用請聯繫專案負責人
            </p>
        </div>
    </div>

    <!-- 5. 系統架構 -->
    <div class="section">
        <div class="section-title">5. 系統架構</div>
        <div class="arch-box">
            <div class="arch-flow">
                <div class="arch-node">iOS App</div>
                <div class="arch-arrow">&rarr;</div>
                <div class="arch-node">Firebase Hosting</div>
                <div class="arch-arrow">&rarr;</div>
                <div class="arch-node">Cloud Run (FastAPI)</div>
                <div class="arch-arrow">&rarr;</div>
                <div class="arch-node">Supabase DB</div>
            </div>
            <div style="margin-top: 20px;">
                <div class="arch-flow">
                    <div class="arch-node ai">Google Gemini AI</div>
                    <div class="arch-arrow">&harr;</div>
                    <div class="arch-node">Cloud Run (FastAPI)</div>
                    <div class="arch-arrow">&harr;</div>
                    <div class="arch-node ai">ElevenLabs (語音轉文字)</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 6. 專案數據 -->
    <div class="section">
        <div class="section-title">6. 專案數據</div>
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">787</div>
                <div class="stat-label">Total Commits</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">432+</div>
                <div class="stat-label">自動化測試</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">40+</div>
                <div class="stat-label">API Endpoints</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">3,500+</div>
                <div class="stat-label">iOS Guide 行數</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">238</div>
                <div class="stat-label">月度峰值 Commits (2025/12)</div>
            </div>
        </div>
    </div>

    <!-- 7. 資訊安全報告 -->
    <div class="section">
        <div class="section-title">7. 資訊安全報告</div>

        <div class="deliverable-group">
            <h3>認證與存取控制</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> 密碼使用 bcrypt 單向雜湊（無法被反解）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> JWT Token 認證（90 天過期自動失效）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 速率限制：註冊 3次/時、登入 5次/分、密碼重設 3次/時</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 帳號鎖定：密碼重設驗證碼錯誤 5 次後鎖定 15 分鐘</div>
        </div>

        <div class="deliverable-group">
            <h3>資料保護</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> Row Level Security (RLS)：每位諮詢師只能存取自己的資料</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 多租戶隔離：不同租戶的資料完全分離</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 資料庫連線使用 SSL 加密</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 所有 API 強制 HTTPS（Firebase Hosting + Cloud Run）</div>
        </div>

        <div class="deliverable-group">
            <h3>程式碼安全</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> SQL Injection 防護（使用 ORM，不直接拼接 SQL）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 輸入驗證（Pydantic schema 驗證所有請求）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> Secrets 管理（GitHub Secrets，不硬編碼於程式碼）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> Pre-commit hooks 自動檢測（Ruff linting + Gitleaks）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> CORS 設定限制允許的來源</div>
        </div>
    </div>

    <!-- 8. 基礎設施與成本 -->
    <div class="section">
        <div class="section-title">8. 基礎設施與成本</div>

        <div class="summary-card" style="margin-bottom: 16px;">
            <div class="summary-row">
                <div class="summary-label">雲端平台</div>
                <div class="summary-value">Google Cloud Platform (GCP)</div>
            </div>
            <div class="summary-row">
                <div class="summary-label">運算服務</div>
                <div class="summary-value">Cloud Run (us-central1, 1 vCPU, 1GB RAM)</div>
            </div>
            <div class="summary-row">
                <div class="summary-label">資料庫</div>
                <div class="summary-value">Supabase PostgreSQL (Free Tier, 500MB)</div>
            </div>
            <div class="summary-row">
                <div class="summary-label">反向代理</div>
                <div class="summary-value">Firebase Hosting (Free Tier, 10GB/月)</div>
            </div>
            <div class="summary-row">
                <div class="summary-label">AI 引擎</div>
                <div class="summary-value">Google Gemini 3 Flash</div>
            </div>
            <div class="summary-row">
                <div class="summary-label">語音轉文字</div>
                <div class="summary-value">ElevenLabs Scribe</div>
            </div>
            <div class="summary-row">
                <div class="summary-label">CI/CD</div>
                <div class="summary-value">GitHub Actions (Free Tier, 2000 分鐘/月)</div>
            </div>
            <div class="summary-row">
                <div class="summary-label">版本控制</div>
                <div class="summary-value">GitHub Private Repository</div>
            </div>
        </div>

        <table class="env-table" style="margin-bottom: 16px;">
            <thead>
                <tr>
                    <th>服務</th>
                    <th>方案</th>
                    <th>預估月費</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Cloud Run</td>
                    <td>Pay-per-use (min-instances=1)</td>
                    <td>$5-15</td>
                </tr>
                <tr>
                    <td>Supabase</td>
                    <td>Free Tier</td>
                    <td>$0</td>
                </tr>
                <tr>
                    <td>Firebase Hosting</td>
                    <td>Free Tier</td>
                    <td>$0</td>
                </tr>
                <tr>
                    <td>Gemini API</td>
                    <td>Pay-per-use</td>
                    <td>$5-20</td>
                </tr>
                <tr>
                    <td>ElevenLabs</td>
                    <td>Pay-per-use</td>
                    <td>$5-15</td>
                </tr>
                <tr>
                    <td>GitHub Actions</td>
                    <td>Free Tier</td>
                    <td>$0</td>
                </tr>
                <tr>
                    <td><strong>合計</strong></td>
                    <td></td>
                    <td><strong>$15-50/月</strong></td>
                </tr>
            </tbody>
        </table>

        <div class="note-list">
            <div class="note-item">
                <span class="note-icon" style="color:#1976d2;">&#128161;</span>
                <span>以上為低用量階段預估（10-50 位用戶）。隨用戶增長，Cloud Run 和 AI API 費用會按比例增加。Supabase 超過 500MB 後需升級至 Pro 方案（$25/月）。</span>
            </div>
        </div>
    </div>

    <!-- 9. 測試覆蓋率 -->
    <div class="section">
        <div class="section-title">9. 測試覆蓋率</div>

        <div class="stats-grid" style="margin-bottom: 16px;">
            <div class="stat-card">
                <div class="stat-number">432+</div>
                <div class="stat-label">自動化測試數量</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">100%</div>
                <div class="stat-label">CI/CD 通過率</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">40+</div>
                <div class="stat-label">測試涵蓋 API 端點</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">每次部署</div>
                <div class="stat-label">自動執行全部測試</div>
            </div>
        </div>

        <div class="deliverable-group">
            <h3>認證與安全測試</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> 註冊流程（含密碼規則驗證）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 登入流程（含錯誤密碼、不存在帳號）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 密碼重設（含驗證碼、鎖定機制）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> Email 驗證（含過期 Token）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 速率限制（超過頻率返回 429）</div>
        </div>

        <div class="deliverable-group">
            <h3>業務邏輯測試</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> Client / Case / Session CRUD 完整流程</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 錄音上傳與管理</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> AI 分析（Quick Feedback + Deep Analyze）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 報告生成與查詢</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 計費與使用量追蹤</div>
        </div>

        <div class="deliverable-group">
            <h3>基礎設施測試</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> API 端點回應格式驗證</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 錯誤處理（400/401/403/404/422/429）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 多租戶資料隔離</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 資料庫連線與交易</div>
        </div>

        <div class="note-list">
            <div class="note-item">
                <span class="note-icon" style="color:#1976d2;">&#128161;</span>
                <span>所有測試在每次程式碼推送時自動執行。任何測試失敗都會阻擋部署，確保正式環境永遠是測試通過的版本。</span>
            </div>
        </div>
    </div>

    <!-- 10. 維護與移交指南 -->
    <div class="section">
        <div class="section-title">10. 維護與移交指南</div>

        <div class="deliverable-group">
            <h3>日常維護</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> 程式碼更新：推送至 staging 分支 &rarr; 自動測試 &rarr; 合併至 main &rarr; 自動部署 PROD</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 監控方式：GitHub Actions 面板可查看每次部署狀態</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 日誌查看：Google Cloud Console &rarr; Cloud Run &rarr; Logs</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 資料庫管理：Supabase Dashboard (app.supabase.com)</div>
        </div>

        <div class="deliverable-group">
            <h3>緊急處理</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> 服務異常：Cloud Run 自動重啟失敗的容器</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 需要回滾：在 GitHub Actions 中重新執行上一次成功的部署</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 資料庫問題：Supabase 提供每日自動備份（Free Tier 保留 7 天）</div>
        </div>

        <div class="deliverable-group">
            <h3>移交清單</h3>
            <div class="check-item"><span class="check-icon">&#10003;</span> 原始碼：GitHub Repository (Youngger9765/career_ios_backend)</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 環境變數：GitHub Secrets（已設定完成）</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> iOS 開發文檔：IOS_GUIDE_PARENTS.md (3,500+ 行)</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> API 互動測試工具：/web/console</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> 結案報告：/closure-report</div>
            <div class="check-item"><span class="check-icon">&#10003;</span> QA 驗收測試：/qa-checklist</div>
        </div>

        <div class="note-list">
            <div class="note-item">
                <span class="note-icon" style="color:#1976d2;">&#128161;</span>
                <span>建議每月檢查一次 Cloud Run 和 AI API 的使用量與費用</span>
            </div>
            <div class="note-item">
                <span class="note-icon" style="color:#1976d2;">&#128161;</span>
                <span>建議每季度更新一次 Python 依賴套件（安全性修補）</span>
            </div>
            <div class="note-item">
                <span class="note-icon" style="color:#1976d2;">&#128161;</span>
                <span>Supabase 資料庫接近 500MB 時需評估是否升級</span>
            </div>
            <div class="note-item">
                <span class="note-icon" style="color:#e65100;">&#9888;</span>
                <span>切勿直接修改 Production 資料庫，請透過 Staging 環境測試後再部署</span>
            </div>
        </div>
    </div>

    <!-- 11. 已知限制 & 後續建議 -->
    <div class="section">
        <div class="section-title">11. 已知限制 &amp; 後續建議</div>
        <div class="note-list">
            <div class="note-item">
                <span class="note-icon" style="color:#e65100;">&#9888;</span>
                <span>PROD 與 Staging 目前共用同一個資料庫（建議 1-2 週內分離）</span>
            </div>
            <div class="note-item">
                <span class="note-icon" style="color:#e65100;">&#9888;</span>
                <span>使用量軟上限尚未設定（需要產品層面的決策）</span>
            </div>
            <div class="note-item">
                <span class="note-icon" style="color:#e65100;">&#9888;</span>
                <span>AI 監控 Dashboard 尚未建立</span>
            </div>
            <div class="note-item">
                <span class="note-icon" style="color:#1976d2;">&#128161;</span>
                <span>建議：iOS 端切換 Base URL 至 Firebase Hosting（品牌 URL）</span>
            </div>
            <div class="note-item">
                <span class="note-icon" style="color:#1976d2;">&#128161;</span>
                <span>建議：建立獨立的 Staging 資料庫</span>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <p>報告產出日期：2026-02-07</p>
        <p style="margin-top:4px;">Co-Authored-By: Claude Code (AI Assistant)</p>
    </div>

</div>
</body>
</html>