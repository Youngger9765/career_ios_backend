# OpenAI vs Gemini æˆæœ¬åˆ†æ (2025)

## å®šåƒ¹å°æ¯”

### OpenAI Pricing (2025)
| æ¨¡å‹ | Input | Output | å‚™è¨» |
|------|-------|--------|------|
| **gpt-4o** | $2.50/1M tokens | $10.00/1M tokens | é«˜å“è³ªè©•åˆ†ç”¨ |
| **gpt-4o-mini** | $0.15/1M tokens | $0.60/1M tokens | æ—¥å¸¸å ±å‘Šç”Ÿæˆ |
| **Whisper** | $0.006/min ($0.36/hr) | - | STT èªéŸ³è½‰æ–‡å­— |
| **text-embedding-3-small** | $0.02/1M tokens | - | RAG å‘é‡åµŒå…¥ |

### Google Gemini Pricing (2025)
| æ¨¡å‹ | Input | Output | å‚™è¨» |
|------|-------|--------|------|
| **Gemini 2.5 Flash** | $0.15/1M tokens | $0.60/1M tokens | èˆ‡ GPT-4o-mini åŒåƒ¹ |
| **Gemini 2.5 Flash-Lite** | $0.10/1M tokens | $0.40/1M tokens | æ›´ç¶“æ¿Ÿé¸é … |
| **Gemini 2.5 Pro** | $1.25/1M tokens | $5.00/1M tokens | é«˜å“è³ªä»»å‹™ |

---

## ç•¶å‰ä½¿ç”¨å ´æ™¯åˆ†æ

### 1. **Embeddings (ä¿ç•™ OpenAI)**
- **æ¨¡å‹**: `text-embedding-3-small`
- **è²»ç”¨**: $0.02/1M tokens
- **ç”¨é€”**: RAG å‘é‡æœå°‹ã€æ–‡ä»¶åµŒå…¥
- **ç†ç”±**: Gemini ä¸æä¾›ç¨ç«‹çš„ embedding APIï¼ŒOpenAI åƒ¹æ ¼å·²ç¶“å¾ˆä¾¿å®œ

### 2. **Whisper STT (ä¿ç•™ OpenAI)**
- **æ¨¡å‹**: `whisper-1`
- **è²»ç”¨**: $0.006/min
- **ç”¨é€”**: æœƒè«‡éŒ„éŸ³è½‰é€å­—ç¨¿
- **ç†ç”±**: Google Speech-to-Text åƒ¹æ ¼ç›¸è¿‘ä½† Whisper æº–ç¢ºåº¦æ›´å¥½

### 3. **æœƒè«‡æ‘˜è¦ç”Ÿæˆ â¡ï¸ æ› Gemini**
- **ç•¶å‰**: `gpt-4o-mini` ($0.15/$0.60)
- **å»ºè­°**: `Gemini 2.5 Flash` ($0.15/$0.60) æˆ– `Flash-Lite` ($0.10/$0.40)
- **ä½ç½®**: `app/services/session_summary_service.py`
- **ç¯€çœ**: å¦‚ç”¨ Flash-Lite å¯çœ **33% æˆæœ¬**

### 4. **å ±å‘Šç”Ÿæˆ (è§£æã€ç”Ÿæˆã€å°è©±æå–) â¡ï¸ æ› Gemini**
- **ç•¶å‰**: `gpt-4o-mini` ($0.15/$0.60)
- **å»ºè­°**: `Gemini 2.5 Flash` ($0.15/$0.60)
- **ä½ç½®**: `app/services/report_service.py`
- **å„ªå‹¢**:
  - Gemini 2.5 Flash æ”¯æ´æ›´é•· context (128K+)
  - åŒæ¨£åƒ¹æ ¼ï¼Œæ€§èƒ½æ›´å¥½
  - å·²ç¶“æœ‰å¯¦ä½œ (`app/api/rag_report.py`)

### 5. **å ±å‘Šå“è³ªè©•åˆ† â¡ï¸ æ› Gemini Pro**
- **ç•¶å‰**: `gpt-4o` ($2.50/$10.00)
- **å»ºè­°**: `Gemini 2.5 Pro` ($1.25/$5.00) æˆ– `Flash` ($0.15/$0.60)
- **ä½ç½®**: `app/utils/report_grader.py`
- **ç¯€çœ**: ç”¨ Gemini Pro çœ **50% æˆæœ¬**ï¼Œç”¨ Flash çœ **94% æˆæœ¬**

### 6. **RAG è©•ä¼° (RAGAS) â¡ï¸ æ› Gemini**
- **ç•¶å‰**: `gpt-4o-mini` ($0.15/$0.60)
- **å»ºè­°**: `Gemini 2.5 Flash` ($0.15/$0.60)
- **ä½ç½®**: `app/services/evaluation_service.py`
- **å„ªå‹¢**: RAGAS æ”¯æ´ Geminiï¼Œå¯æ¸¬è©¦æ•ˆæœ

---

## æˆæœ¬ä¼°ç®— (æ¯æœˆ)

### å‡è¨­ä½¿ç”¨é‡
- **æœƒè«‡æ‘˜è¦**: 1,000 sessions Ã— 1,000 input tokens + 150 output tokens
- **å ±å‘Šç”Ÿæˆ**: 500 reports Ã— 3,000 input tokens + 2,000 output tokens
- **å ±å‘Šè©•åˆ†**: 500 reports Ã— 2,000 input tokens + 500 output tokens
- **Whisper STT**: 1,000 sessions Ã— 60 min avg
- **Embeddings**: 10,000 documents Ã— 500 tokens avg

### OpenAI (ç•¶å‰)
```
æ‘˜è¦: (1M Ã— 0.15) + (0.15M Ã— 0.60) = $0.15 + $0.09 = $0.24
å ±å‘Š: (1.5M Ã— 0.15) + (1M Ã— 0.60) = $0.225 + $0.60 = $0.825
è©•åˆ†: (1M Ã— 2.50) + (0.25M Ã— 10.00) = $2.50 + $2.50 = $5.00
Whisper: 1,000 Ã— 60 min Ã— $0.006 = $360
Embeddings: 5M Ã— $0.02 = $0.10

ç¸½è¨ˆ: $366.165/æœˆ
```

### Gemini (å»ºè­°æ–¹æ¡ˆ)
```
æ‘˜è¦: (1M Ã— 0.10) + (0.15M Ã— 0.40) = $0.10 + $0.06 = $0.16 (Flash-Lite)
å ±å‘Š: (1.5M Ã— 0.15) + (1M Ã— 0.60) = $0.225 + $0.60 = $0.825 (Flash)
è©•åˆ†: (1M Ã— 0.15) + (0.25M Ã— 0.60) = $0.15 + $0.15 = $0.30 (Flash)
Whisper: 1,000 Ã— 60 min Ã— $0.006 = $360
Embeddings: 5M Ã— $0.02 = $0.10

ç¸½è¨ˆ: $361.385/æœˆ
ç¯€çœ: $4.78/æœˆ (1.3%)
```

### Gemini æ¿€é€²æ–¹æ¡ˆ (å…¨ç”¨ Flash-Lite)
```
æ‘˜è¦: $0.16 (Flash-Lite)
å ±å‘Š: (1.5M Ã— 0.10) + (1M Ã— 0.40) = $0.15 + $0.40 = $0.55 (Flash-Lite)
è©•åˆ†: (1M Ã— 0.10) + (0.25M Ã— 0.40) = $0.10 + $0.10 = $0.20 (Flash-Lite)
Whisper: $360
Embeddings: $0.10

ç¸½è¨ˆ: $361.01/æœˆ
ç¯€çœ: $5.16/æœˆ (1.4%)
```

**âš ï¸ æ³¨æ„**: ä¸»è¦æˆæœ¬åœ¨ Whisper STT ($360/æœˆ)ï¼ŒLLM æˆæœ¬åªä½” 1.7%

---

## é·ç§»å»ºè­°ï¼ˆä¿ç•™ RAG/Whisper/Embedï¼‰

### Phase 1: ä½é¢¨éšªé·ç§»
âœ… **å ±å‘Šç”Ÿæˆ** â†’ Gemini 2.5 Flash
- ä½ç½®: `app/services/report_service.py`
- é¢¨éšª: ä½ï¼ˆå·²æœ‰ rag_report.py å¯¦ä½œï¼‰
- æ¸¬è©¦: A/B æ¸¬è©¦æ¯”è¼ƒå“è³ª

### Phase 2: ä¸­é¢¨éšªé·ç§»
âœ… **æœƒè«‡æ‘˜è¦** â†’ Gemini 2.5 Flash-Lite
- ä½ç½®: `app/services/session_summary_service.py`
- é¢¨éšª: ä¸­ï¼ˆéœ€æ¸¬è©¦ 100 å­—æ‘˜è¦å“è³ªï¼‰
- æ¸¬è©¦: æŠ½æ¨£ 50 å€‹æœƒè«‡æ¯”è¼ƒ

### Phase 3: é«˜é¢¨éšªé·ç§»
âš ï¸ **å ±å‘Šè©•åˆ†** â†’ Gemini 2.5 Flash
- ä½ç½®: `app/utils/report_grader.py`
- é¢¨éšª: é«˜ï¼ˆè©•åˆ†æ¨™æº–æº–ç¢ºæ€§ï¼‰
- æ¸¬è©¦: ç”¨æ­·å²å ±å‘Šé©—è­‰è©•åˆ†ä¸€è‡´æ€§

### Phase 4: å¯é¸é·ç§»
ğŸ”„ **RAG è©•ä¼°** â†’ Gemini 2.5 Flash
- ä½ç½®: `app/services/evaluation_service.py`
- é¢¨éšª: ä½ï¼ˆRAGAS å®˜æ–¹æ”¯æ´ï¼‰

---

## å¯¦ä½œå„ªå…ˆé †åº

### ğŸš€ ç«‹å³åŸ·è¡Œ
1. âœ… å°‡ `report_service.py` é è¨­æ”¹ç‚º Gemini
2. âœ… æ“´å±• `gemini_service.py` æ”¯æ´ structured output
3. âœ… å°‡ `session_summary_service.py` æ”¹ç”¨ Gemini

### ğŸ“Š éœ€è¦æ¸¬è©¦
4. âš ï¸ A/B æ¸¬è©¦å ±å‘Šå“è³ªï¼ˆOpenAI vs Geminiï¼‰
5. âš ï¸ é©—è­‰å ±å‘Šè©•åˆ†æº–ç¢ºæ€§ï¼ˆGPT-4o vs Gemini Flashï¼‰

### ğŸ” é•·æœŸå„ªåŒ–
6. è€ƒæ…® Flash-Lite ç”¨æ–¼éé—œéµä»»å‹™
7. ç›£æ§ Gemini 2.5 Pro åƒ¹æ ¼å’Œæ€§èƒ½
8. æ¢ç´¢ batch processing (çœ 50%)

---

## ç¸½çµ

### âœ… å»ºè­°é·ç§»è‡³ Gemini çš„åŠŸèƒ½
1. **å ±å‘Šç”Ÿæˆ** (å ±å‘Šè§£æã€çµæ§‹åŒ–ç”Ÿæˆã€å°è©±æå–)
2. **æœƒè«‡æ‘˜è¦ç”Ÿæˆ**
3. **å ±å‘Šå“è³ªè©•åˆ†** (å¯å¤§å¹…çœæˆæœ¬)
4. **RAG è©•ä¼°**

### âŒ ä¿ç•™ OpenAI çš„åŠŸèƒ½
1. **Whisper STT** (ç„¡æ›´å¥½æ›¿ä»£æ–¹æ¡ˆ)
2. **text-embedding-3-small** (åƒ¹æ ¼ä½ä¸”ç”Ÿæ…‹æˆç†Ÿ)
3. **RAG Chat** (å·²æœ‰å¤§é‡åµŒå…¥è³‡æ–™)

### ğŸ’° æˆæœ¬æ•ˆç›Š
- **çŸ­æœŸ**: ç¯€çœç´„ 1-2% (ä¸»è¦æˆæœ¬åœ¨ Whisper)
- **é•·æœŸ**: å¦‚ Gemini æ€§èƒ½æ›´å¥½ï¼Œå¯æå‡å ±å‘Šå“è³ª
- **é¢¨éšª**: éœ€é©—è­‰è©•åˆ†æº–ç¢ºæ€§å’Œå ±å‘Šå“è³ª

**æ ¸å¿ƒè€ƒé‡**: é›–ç„¶ Gemini èˆ‡ GPT-4o-mini åŒåƒ¹ï¼Œä½† Gemini 2.5 Flash åœ¨é•·æ–‡æœ¬ç”Ÿæˆå’Œçµæ§‹åŒ–è¼¸å‡ºä¸Šå¯èƒ½æ›´å„ªç§€ã€‚å»ºè­°å…ˆç”¨ A/B æ¸¬è©¦é©—è­‰å“è³ªï¼Œå†å…¨é¢é·ç§»ã€‚
