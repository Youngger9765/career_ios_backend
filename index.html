<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Career Platform - è«®å•†å¹³å° API å±•ç¤º</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 3rem;
            padding: 2rem;
        }
        h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        .subtitle {
            font-size: 1.3rem;
            opacity: 0.95;
        }
        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }
        .demo-card {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .demo-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        .demo-title {
            font-size: 1.5rem;
            color: #764ba2;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
        }
        .demo-icon {
            margin-right: 0.5rem;
            font-size: 1.8rem;
        }
        .demo-description {
            color: #666;
            margin-bottom: 1.5rem;
        }
        .demo-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            transition: opacity 0.3s;
        }
        .demo-button:hover {
            opacity: 0.9;
        }
        .demo-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        .api-response {
            margin-top: 1.5rem;
            padding: 1rem;
            background: #f5f5f5;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            max-height: 300px;
            overflow-y: auto;
            display: none;
        }
        .api-response.show {
            display: block;
        }
        .pipeline-section {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 3rem;
        }
        .pipeline-title {
            font-size: 2rem;
            color: #764ba2;
            text-align: center;
            margin-bottom: 2rem;
        }
        .pipeline-stages {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
        }
        .stage {
            flex: 1;
            min-width: 150px;
            padding: 1rem;
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            border-radius: 8px;
            text-align: center;
            position: relative;
        }
        .stage.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        .stage-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }
        .stage-name {
            font-size: 1rem;
            font-weight: 500;
        }
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #764ba2;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .status-badge {
            display: inline-block;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 0.5rem;
        }
        .status-success {
            background: #d4edda;
            color: #155724;
        }
        .status-error {
            background: #f8d7da;
            color: #721c24;
        }
        .status-pending {
            background: #fff3cd;
            color: #856404;
        }
        .footer {
            text-align: center;
            color: white;
            padding: 2rem;
            opacity: 0.9;
        }
        .note {
            background: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 2rem;
            color: #856404;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸš€ Career Platform API</h1>
            <p class="subtitle">æ™ºæ…§è«®å•†è¼”åŠ©ç³»çµ± - æŠ€è¡“å±•ç¤ºå¹³å°</p>
        </div>

        <div class="note">
            <strong>âš ï¸ æ³¨æ„ï¼š</strong>ç”±æ–¼çµ„ç¹”æ”¿ç­–é™åˆ¶ï¼ŒAPI éœ€è¦èº«ä»½é©—è­‰ã€‚ä»¥ä¸‹å±•ç¤ºä½¿ç”¨æ¨¡æ“¬æ•¸æ“šä¾†å‘ˆç¾ç³»çµ±åŠŸèƒ½ã€‚
        </div>

        <!-- Pipeline Section -->
        <div class="pipeline-section">
            <h2 class="pipeline-title">ğŸ“Š 5éšæ®µè™•ç†æµç¨‹</h2>
            <div class="pipeline-stages" id="pipelineStages">
                <div class="stage" data-stage="1">
                    <div class="stage-number">1</div>
                    <div class="stage-name">ğŸ“¤ éŸ³è¨Šä¸Šå‚³</div>
                </div>
                <div class="stage" data-stage="2">
                    <div class="stage-number">2</div>
                    <div class="stage-name">ğŸ™ï¸ èªéŸ³è½‰æ–‡å­—</div>
                </div>
                <div class="stage" data-stage="3">
                    <div class="stage-number">3</div>
                    <div class="stage-name">ğŸ”’ æ–‡å­—è„«æ•</div>
                </div>
                <div class="stage" data-stage="4">
                    <div class="stage-number">4</div>
                    <div class="stage-name">ğŸ¤– AI åˆ†æ</div>
                </div>
                <div class="stage" data-stage="5">
                    <div class="stage-number">5</div>
                    <div class="stage-name">ğŸ“‹ å ±å‘Šç”Ÿæˆ</div>
                </div>
            </div>
        </div>

        <!-- Demo Cards -->
        <div class="demo-grid">
            <div class="demo-card">
                <h3 class="demo-title">
                    <span class="demo-icon">ğŸ“±</span>
                    ç³»çµ±ç‹€æ…‹æª¢æŸ¥
                </h3>
                <p class="demo-description">
                    æª¢æŸ¥ API æœå‹™æ˜¯å¦æ­£å¸¸é‹è¡Œï¼ŒåŒ…å«ç‰ˆæœ¬è³‡è¨Šèˆ‡å¥åº·ç‹€æ…‹ã€‚
                </p>
                <button class="demo-button" onclick="checkHealth()">
                    æª¢æŸ¥ç³»çµ±ç‹€æ…‹
                </button>
                <div class="api-response" id="health-response"></div>
            </div>

            <div class="demo-card">
                <h3 class="demo-title">
                    <span class="demo-icon">ğŸ“</span>
                    è«®å•†æœƒè«‡åˆ—è¡¨
                </h3>
                <p class="demo-description">
                    ç²å–æ‰€æœ‰è«®å•†æœƒè«‡è¨˜éŒ„ï¼ŒåŒ…å«è«®å•†å¸«ã€å€‹æ¡ˆè³‡è¨Šèˆ‡æœƒè«‡ç‹€æ…‹ã€‚
                </p>
                <button class="demo-button" onclick="getSessions()">
                    å–å¾—æœƒè«‡åˆ—è¡¨
                </button>
                <div class="api-response" id="sessions-response"></div>
            </div>

            <div class="demo-card">
                <h3 class="demo-title">
                    <span class="demo-icon">ğŸ¤</span>
                    æ¨¡æ“¬éŸ³è¨Šä¸Šå‚³
                </h3>
                <p class="demo-description">
                    ç¤ºç¯„ä¸Šå‚³è«®å•†éŒ„éŸ³æª”æ¡ˆï¼Œå•Ÿå‹•è‡ªå‹•è™•ç†æµç¨‹ã€‚
                </p>
                <button class="demo-button" onclick="simulateUpload()">
                    æ¨¡æ“¬ä¸Šå‚³éŒ„éŸ³
                </button>
                <div class="api-response" id="upload-response"></div>
            </div>

            <div class="demo-card">
                <h3 class="demo-title">
                    <span class="demo-icon">âš™ï¸</span>
                    è™•ç†é€²åº¦è¿½è¹¤
                </h3>
                <p class="demo-description">
                    å³æ™‚è¿½è¹¤éŸ³è¨Šè™•ç†çš„5å€‹éšæ®µé€²åº¦ã€‚
                </p>
                <button class="demo-button" onclick="trackProgress()">
                    æŸ¥çœ‹è™•ç†é€²åº¦
                </button>
                <div class="api-response" id="progress-response"></div>
            </div>

            <div class="demo-card">
                <h3 class="demo-title">
                    <span class="demo-icon">ğŸ“Š</span>
                    AI åˆ†æå ±å‘Š
                </h3>
                <p class="demo-description">
                    æŸ¥çœ‹ AI ç”Ÿæˆçš„è«®å•†åˆ†æå ±å‘Šç¯„ä¾‹ã€‚
                </p>
                <button class="demo-button" onclick="getReport()">
                    æŸ¥çœ‹åˆ†æå ±å‘Š
                </button>
                <div class="api-response" id="report-response"></div>
            </div>

            <div class="demo-card">
                <h3 class="demo-title">
                    <span class="demo-icon">ğŸ‘¥</span>
                    å€‹æ¡ˆç®¡ç†
                </h3>
                <p class="demo-description">
                    ç®¡ç†å€‹æ¡ˆè³‡æ–™ï¼ŒåŒ…å«åŸºæœ¬è³‡è¨Šèˆ‡è«®å•†æ­·å²ã€‚
                </p>
                <button class="demo-button" onclick="getCases()">
                    æŸ¥çœ‹å€‹æ¡ˆåˆ—è¡¨
                </button>
                <div class="api-response" id="cases-response"></div>
            </div>
        </div>

        <div class="footer">
            <p>Â© 2025 Career Platform - æ™ºæ…§è«®å•†è¼”åŠ©ç³»çµ±</p>
            <p>ğŸ”§ Powered by FastAPI + Google Cloud Run</p>
        </div>
    </div>

    <script>
        // æ¨¡æ“¬ API ç«¯é»ï¼ˆå¯¦éš›ä½¿ç”¨æ™‚éœ€è¦å¾Œç«¯æ”¯æ´ CORSï¼‰
        const API_BASE = 'https://career-app-api-kxaznpplqq-uc.a.run.app';
        
        // ä½¿ç”¨æ¨¡æ“¬æ•¸æ“šå±•ç¤ºåŠŸèƒ½
        const mockData = {
            health: {
                status: "healthy",
                version: "1.0.0",
                timestamp: new Date().toISOString(),
                environment: "production",
                services: {
                    database: "connected",
                    storage: "ready",
                    ai_engine: "operational"
                }
            },
            sessions: [
                {
                    id: 1,
                    counselor_name: "å¼µè«®å•†å¸«",
                    client_name: "å€‹æ¡ˆA",
                    date: "2025-01-23",
                    status: "completed",
                    duration: "50 åˆ†é˜"
                },
                {
                    id: 2,
                    counselor_name: "æè«®å•†å¸«",
                    client_name: "å€‹æ¡ˆB",
                    date: "2025-01-22",
                    status: "processing",
                    duration: "45 åˆ†é˜"
                }
            ],
            upload: {
                status: "processing",
                job_id: "job_" + Math.random().toString(36).substr(2, 9),
                message: "éŸ³è¨Šæª”æ¡ˆå·²ä¸Šå‚³ï¼Œé–‹å§‹è™•ç†...",
                estimated_time: "5-10 åˆ†é˜"
            },
            progress: {
                job_id: "job_abc123",
                current_stage: 3,
                stages: [
                    { stage: 1, name: "éŸ³è¨Šä¸Šå‚³", status: "completed" },
                    { stage: 2, name: "èªéŸ³è½‰æ–‡å­—", status: "completed" },
                    { stage: 3, name: "æ–‡å­—è„«æ•", status: "processing" },
                    { stage: 4, name: "AI åˆ†æ", status: "pending" },
                    { stage: 5, name: "å ±å‘Šç”Ÿæˆ", status: "pending" }
                ]
            },
            report: {
                session_id: 1,
                generated_at: new Date().toISOString(),
                summary: "æœ¬æ¬¡è«®å•†æœƒè«‡ä¸»è¦è¨è«–äº†å€‹æ¡ˆçš„è·æ¶¯ç™¼å±•å›°æ“¾...",
                key_points: [
                    "è·æ¶¯æ–¹å‘ä¸æ˜ç¢º",
                    "å·¥ä½œå£“åŠ›ç®¡ç†",
                    "äººéš›é—œä¿‚æ”¹å–„"
                ],
                recommendations: [
                    "å»ºè­°é€²è¡Œè·æ¶¯èˆˆè¶£æ¢ç´¢",
                    "å­¸ç¿’å£“åŠ›èª¿é©æŠ€å·§",
                    "åŠ å¼·æºé€šèƒ½åŠ›è¨“ç·´"
                ]
            },
            cases: [
                {
                    id: 1,
                    name: "å€‹æ¡ˆA",
                    age: 28,
                    sessions_count: 5,
                    last_session: "2025-01-23",
                    status: "active"
                },
                {
                    id: 2,
                    name: "å€‹æ¡ˆB",
                    age: 35,
                    sessions_count: 3,
                    last_session: "2025-01-22",
                    status: "active"
                }
            ]
        };

        function showResponse(elementId, data, success = true) {
            const element = document.getElementById(elementId);
            element.innerHTML = `<pre>${JSON.stringify(data, null, 2)}</pre>`;
            element.classList.add('show');
            
            // æ·»åŠ ç‹€æ…‹æ¨™ç±¤
            const badge = document.createElement('div');
            badge.className = `status-badge ${success ? 'status-success' : 'status-error'}`;
            badge.textContent = success ? 'âœ“ æˆåŠŸ' : 'âœ— éŒ¯èª¤';
            element.prepend(badge);
        }

        function showLoading(button) {
            const originalText = button.innerHTML;
            button.disabled = true;
            button.innerHTML = originalText + '<span class="loading"></span>';
            return () => {
                button.disabled = false;
                button.innerHTML = originalText;
            };
        }

        async function checkHealth() {
            const button = event.target;
            const stopLoading = showLoading(button);
            
            setTimeout(() => {
                showResponse('health-response', mockData.health, true);
                stopLoading();
            }, 1000);
        }

        async function getSessions() {
            const button = event.target;
            const stopLoading = showLoading(button);
            
            setTimeout(() => {
                showResponse('sessions-response', mockData.sessions, true);
                stopLoading();
            }, 1000);
        }

        async function simulateUpload() {
            const button = event.target;
            const stopLoading = showLoading(button);
            
            // æ¨¡æ“¬ä¸Šå‚³å‹•ç•«
            animatePipeline();
            
            setTimeout(() => {
                showResponse('upload-response', mockData.upload, true);
                stopLoading();
            }, 1500);
        }

        async function trackProgress() {
            const button = event.target;
            const stopLoading = showLoading(button);
            
            setTimeout(() => {
                showResponse('progress-response', mockData.progress, true);
                // æ›´æ–° pipeline è¦–è¦ºåŒ–
                updatePipelineStages(mockData.progress.current_stage);
                stopLoading();
            }, 1000);
        }

        async function getReport() {
            const button = event.target;
            const stopLoading = showLoading(button);
            
            setTimeout(() => {
                showResponse('report-response', mockData.report, true);
                stopLoading();
            }, 1000);
        }

        async function getCases() {
            const button = event.target;
            const stopLoading = showLoading(button);
            
            setTimeout(() => {
                showResponse('cases-response', mockData.cases, true);
                stopLoading();
            }, 1000);
        }

        function updatePipelineStages(currentStage) {
            const stages = document.querySelectorAll('.stage');
            stages.forEach((stage, index) => {
                if (index < currentStage) {
                    stage.classList.add('active');
                } else {
                    stage.classList.remove('active');
                }
            });
        }

        function animatePipeline() {
            let stage = 1;
            const interval = setInterval(() => {
                updatePipelineStages(stage);
                stage++;
                if (stage > 5) {
                    clearInterval(interval);
                    // é‡ç½®
                    setTimeout(() => {
                        updatePipelineStages(0);
                    }, 2000);
                }
            }, 500);
        }

        // é é¢è¼‰å…¥æ™‚çš„å‹•ç•«
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                updatePipelineStages(2);
            }, 500);
        });
    </script>
</body>
</html>